# runner type tag
_type_: test.toy_ratings
# wandb project
project: recsys_toy_ratings
# wandb logging
log: True

seed: 42
cuda_device: ...

top_k: 10
epochs: 100

dataset:
  _type_: dataset.toy_ratings
  global_config: ???
  source:
    _type_: ds_source.random
    seed: ???
    n_users: 20
    n_items: 20
    n_pairs: 0.5

  embeddings_n_dims: 5
  user_embeddings:
    _base_: embeddings.clusters
  item_embeddings:
    _base_: embeddings.clusters

  ratings:
    metric: l1
    positive_ratio: 0.1

mdp:
  actions: continuous
  rewards:
    baseline: 0.0
    continuous: 0.5
    discrete: [0.5, 0.5]


embeddings:
  random:
    _type_: embeddings.random
    seed: ???
    n_dims: ???

  clusters:
    _type_: embeddings.clusters
    seed: ???
    n_dims: ???
    n_clusters: [2, 1, 4, 1, 2]
    intra_cluster_noise_scale: 0.05
    n_dissimilar_dims_required: 3
    min_dim_delta: 0.3
    min_l2_dist: 0.1
    max_generation_tries: 10000

#dataset_preparer:
#
#mdp:
#  _type_: mdp
#  use_negative_events: True
#  rating_based_reward: False
#  reward_top_k: True
#  rating_actions: False
#  action_randomization_scale: 0.01
#
#  raw_rating_to_reward_rescale:
#    1.0: -1.0
#    2.0: -0.3
#    3.0: 0.25
#    4.0: 0.7
#    5.0: 1.0
#
#  binary_rating_to_reward_rescale:
#    1.0: -1.0
#    2.0: -1.0
#    3.0: 1.0
#    4.0: 1.0
#    5.0: 1.0
#
#dataset_preparers:
#  split_by: timestamp
#  train_ratio: 0.8
#  test_ratio: 0.2
#
#
#datasets:
#  random:
#    _type_: ds.random
#    n_users: ???
#    n_items: ???
#    pairs: ???
#    test_ratio: 0.2
#  rs_dataset:
#    _type_: ds.rs_dataset
#    name: MovieLens.100k
#    test_ratio: 0.2
